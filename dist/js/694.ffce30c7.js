"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[694],{7694:function(e,t,o){o.r(t),o.d(t,{default:function(){return ge}});var r=o(9067),n=o(4821),i=(o(563),o(311));const a=["innerHTML"];function s(e,t,o,r,n,s){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{innerHTML:s.highLightRes},null,8,a)}var l={props:{content:{type:String,default:""},keyword:{type:String,default:""}},computed:{highLightRes(){return this.highLight(this.content,this.keyword)}},methods:{highLight(e,t){const o=new RegExp(t,"ig");return e.replace(o,(e=>`<span style="color:#8648D3">${e}</span>`))}}},c=o(7477);const u=(0,c.Z)(l,[["render",s]]);var d=u,h=o(6056),g=(o(9247),o(3805)),f=(o(3081),o(4250)),p=(o(7461),o(168)),m=(o(4165),o(1404)),v=o(610),y=o(2220),w=o(5323),k=o(7936),b=o(5322),V=o(6491),L=o(6048);function S(e){return Array.isArray(e)?!e.length:0!==e&&!e}function x(e,t){if(S(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function C(e,t){return new Promise((o=>{const r=t.validator(e,t);(0,V.tI)(r)?r.then(o):o(r)}))}function N(e,t){const{message:o}=t;return(0,V.mf)(o)?o(e,t):o||""}function B(e){let{target:t}=e;t.composing=!0}function I(e){let{target:t}=e;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}function T(e,t){const o=(0,k.oD)();e.style.height="auto";let r=e.scrollHeight;if((0,V.Kn)(t)){const{maxHeight:e,minHeight:o}=t;void 0!==e&&(r=Math.min(r,e)),void 0!==o&&(r=Math.max(r,o))}r&&(e.style.height=`${r}px`,(0,k.kn)(o))}function A(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function F(e){return[...e].length}function E(e,t){return[...e].slice(0,t).join("")}var M=o(9048),H=o(253);let D=0;function P(){const e=(0,i.getCurrentInstance)(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++D}`}var O=o(3444);const[R,$]=(0,v["do"])("field"),q={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:w.Or,formatter:Function,clearIcon:(0,w.SQ)("clear"),modelValue:(0,w.SI)(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:(0,w.SQ)("focus"),formatTrigger:(0,w.SQ)("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},J=(0,y.l7)({},M.x,q,{rows:w.Or,type:(0,w.SQ)("text"),rules:Array,autosize:[Boolean,Object],labelWidth:w.Or,labelClass:w.Vg,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var z=(0,i.defineComponent)({name:R,props:J,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,t){let{emit:o,slots:r}=t;const n=P(),a=(0,i.reactive)({status:"unvalidated",focused:!1,validateMessage:""}),s=(0,i.ref)(),l=(0,i.ref)(),c=(0,i.ref)(),{parent:u}=(0,H.NB)(b.WN),d=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},h=t=>(0,V.Xq)(e[t])?e[t]:u&&(0,V.Xq)(u.props[t])?u.props[t]:void 0,g=(0,i.computed)((()=>{const t=h("readonly");if(e.clearable&&!t){const t=""!==d(),o="always"===e.clearTrigger||"focus"===e.clearTrigger&&a.focused;return t&&o}return!1})),m=(0,i.computed)((()=>c.value&&r.input?c.value():e.modelValue)),v=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===a.status)return;let{value:e}=m;if(t.formatter&&(e=t.formatter(e,t)),!x(e,t))return a.status="failed",void(a.validateMessage=N(e,t));if(t.validator){if(S(e)&&!1===t.validateEmpty)return;return C(e,t).then((o=>{o&&"string"===typeof o?(a.status="failed",a.validateMessage=o):!1===o&&(a.status="failed",a.validateMessage=N(e,t))}))}}))),Promise.resolve()),w=()=>{a.status="unvalidated",a.validateMessage=""},M=()=>o("end-validate",{status:a.status}),D=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.rules;return new Promise((r=>{w(),t?(o("start-validate"),v(t).then((()=>{"failed"===a.status?(r({name:e.name,message:a.validateMessage}),M()):(a.status="passed",r(),M())}))):r()}))},R=t=>{if(u&&e.rules){const{validateTrigger:o}=u.props,r=(0,y.qo)(o).includes(t),n=e.rules.filter((e=>e.trigger?(0,y.qo)(e.trigger).includes(t):r));n.length&&D(n)}},q=t=>{const{maxlength:o}=e;if((0,V.Xq)(o)&&F(t)>o){const e=d();return e&&F(e)===+o?e:E(t,+o)}return t},J=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onChange";if(t=q(t),"number"===e.type||"digit"===e.type){const o="number"===e.type;t=(0,L.uf)(t,o,o)}e.formatter&&r===e.formatTrigger&&(t=e.formatter(t)),s.value&&s.value.value!==t&&(s.value.value=t),t!==e.modelValue&&o("update:modelValue",t)},z=e=>{e.target.composing||J(e.target.value)},_=()=>{var e;return null==(e=s.value)?void 0:e.blur()},Q=()=>{var e;return null==(e=s.value)?void 0:e.focus()},j=()=>{const t=s.value;"textarea"===e.type&&e.autosize&&t&&T(t,e.autosize)},W=e=>{a.focused=!0,o("focus",e),(0,i.nextTick)(j),h("readonly")&&_()},X=e=>{h("readonly")||(a.focused=!1,J(d(),"onBlur"),o("blur",e),R("onBlur"),(0,i.nextTick)(j),(0,k.pe)())},K=e=>o("click-input",e),U=e=>o("click-left-icon",e),Z=e=>o("click-right-icon",e),G=e=>{(0,k.PF)(e),o("update:modelValue",""),o("clear",e)},Y=(0,i.computed)((()=>"boolean"===typeof e.error?e.error:!(!u||!u.props.showError||"failed"!==a.status)||void 0)),ee=(0,i.computed)((()=>{const e=h("labelWidth");if(e)return{width:(0,L.Nn)(e)}})),te=t=>{const r=13;if(t.keyCode===r){const o=u&&u.props.submitOnEnter;o||"textarea"===e.type||(0,k.PF)(t),"search"===e.type&&_()}o("keypress",t)},oe=()=>e.id||`${n}-input`,re=()=>a.status,ne=()=>{const t=$("control",[h("inputAlign"),{error:Y.value,custom:!!r.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(r.input)return(0,i.createVNode)("div",{class:t,onClick:K},[r.input()]);const o={id:oe(),ref:s,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:h("disabled"),readonly:h("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${n}-label`:void 0,onBlur:X,onFocus:W,onInput:z,onClick:K,onChange:I,onKeypress:te,onCompositionend:I,onCompositionstart:B};return"textarea"===e.type?(0,i.createVNode)("textarea",o,null):(0,i.createVNode)("input",(0,i.mergeProps)(A(e.type),o),null)},ie=()=>{const t=r["left-icon"];if(e.leftIcon||t)return(0,i.createVNode)("div",{class:$("left-icon"),onClick:U},[t?t():(0,i.createVNode)(p.J,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ae=()=>{const t=r["right-icon"];if(e.rightIcon||t)return(0,i.createVNode)("div",{class:$("right-icon"),onClick:Z},[t?t():(0,i.createVNode)(p.J,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},se=()=>{if(e.showWordLimit&&e.maxlength){const t=F(d());return(0,i.createVNode)("div",{class:$("word-limit")},[(0,i.createVNode)("span",{class:$("word-num")},[t]),(0,i.createTextVNode)("/"),e.maxlength])}},le=()=>{if(u&&!1===u.props.showErrorMessage)return;const t=e.errorMessage||a.validateMessage;if(t){const e=r["error-message"],o=h("errorMessageAlign");return(0,i.createVNode)("div",{class:$("error-message",o)},[e?e({message:t}):t])}},ce=()=>{const t=h("colon")?":":"";return r.label?[r.label(),t]:e.label?(0,i.createVNode)("label",{id:`${n}-label`,for:oe()},[e.label+t]):void 0},ue=()=>[(0,i.createVNode)("div",{class:$("body")},[ne(),g.value&&(0,i.createVNode)(p.J,{ref:l,name:e.clearIcon,class:$("clear")},null),ae(),r.button&&(0,i.createVNode)("div",{class:$("button")},[r.button()])]),se(),le()];return(0,O.F)({blur:_,focus:Q,validate:D,formValue:m,resetValidation:w,getValidationStatus:re}),(0,i.provide)(H.F1,{customValue:c,resetValidation:w,validateWithTrigger:R}),(0,i.watch)((()=>e.modelValue),(()=>{J(d()),w(),R("onChange"),(0,i.nextTick)(j)})),(0,i.onMounted)((()=>{J(d(),e.formatTrigger),(0,i.nextTick)(j)})),(0,H.OR)("touchstart",G,{target:(0,i.computed)((()=>{var e;return null==(e=l.value)?void 0:e.$el}))}),()=>{const t=h("disabled"),o=h("labelAlign"),n=ce(),a=ie();return(0,i.createVNode)(f.b,{size:e.size,icon:e.leftIcon,class:$({error:Y.value,disabled:t,[`label-${o}`]:o}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ee.value,valueClass:$("value"),titleClass:[$("label",[o,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:a?()=>a:null,title:n?()=>n:null,value:ue,extra:r.extra})}}});const _=(0,m.n)(z);const[Q,j,W]=(0,v["do"])("search"),X=(0,y.l7)({},q,{label:String,shape:(0,w.SQ)("square"),leftIcon:(0,w.SQ)("search"),clearable:w.J5,actionText:String,background:String,showAction:Boolean});var K=(0,i.defineComponent)({name:Q,props:X,emits:["blur","focus","clear","search","cancel","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,t){let{emit:o,slots:r,attrs:n}=t;const a=P(),s=(0,i.ref)(),l=()=>{r.action||(o("update:modelValue",""),o("cancel"))},c=t=>{const r=13;t.keyCode===r&&((0,k.PF)(t),o("search",e.modelValue))},u=()=>e.id||`${a}-input`,d=()=>{if(r.label||e.label)return(0,i.createVNode)("label",{class:j("label"),for:u()},[r.label?r.label():e.label])},h=()=>{if(e.showAction){const t=e.actionText||W("cancel");return(0,i.createVNode)("div",{class:j("action"),role:"button",tabindex:0,onClick:l},[r.action?r.action():t])}},g=()=>{var e;return null==(e=s.value)?void 0:e.blur()},f=()=>{var e;return null==(e=s.value)?void 0:e.focus()},p=e=>o("blur",e),m=e=>o("focus",e),v=e=>o("clear",e),w=e=>o("click-input",e),b=e=>o("click-left-icon",e),V=e=>o("click-right-icon",e),L=Object.keys(q),S=()=>{const t=(0,y.l7)({},n,(0,y.ei)(e,L),{id:u()}),a=e=>o("update:modelValue",e);return(0,i.createVNode)(_,(0,i.mergeProps)({ref:s,type:"search",class:j("field"),border:!1,onBlur:p,onFocus:m,onClear:v,onKeypress:c,"onClick-input":w,"onClick-left-icon":b,"onClick-right-icon":V,"onUpdate:modelValue":a},t),(0,y.ei)(r,["left-icon","right-icon"]))};return(0,O.F)({focus:f,blur:g}),()=>{var t;return(0,i.createVNode)("div",{class:j({"show-action":e.showAction}),style:{background:e.background}},[null==(t=r.left)?void 0:t.call(r),(0,i.createVNode)("div",{class:j("content",e.shape)},[d(),S()]),h()])}}});const U=(0,m.n)(K);o(1958),o(368),o(6742),o(3094);const Z={key:0},G={class:"search-wrap"},Y={class:"history-name-wrap"},ee=["onMousedown"],te={class:"arrow-item"},oe={class:"arrow-item"},re={class:"search-wrap"},ne={class:"sub-title"},ie={key:1,class:"suggest-wrap"},ae={key:2,class:"search-wrap"},se=(0,i.createElementVNode)("p",{class:"sub-title"},"搜索结果",-1);function le(e,t,o,a,s,l){const c=U,u=p.J,m=f.b,v=g.J,y=h.X,w=d,k=n.a,b=r.Z;return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)(c,{modelValue:s.searchValue,"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchValue=e),placeholder:s.searchDefault,shape:"round","show-action":"",autocomplete:"off",onSearch:l.searchBtnFn,onInput:l.getSuggestFn,onFocus:t[2]||(t[2]=e=>{this.prepareSearch||(this.prepareSearch=!0)}),onClear:t[3]||(t[3]=e=>s.suggestList=[])},{action:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{onClick:t[0]||(t[0]=function(){return l.searchBtnFn&&l.searchBtnFn(...arguments)}),class:"search-button"},"搜索")])),_:1},8,["modelValue","placeholder","onSearch","onInput"]),s.prepareSearch&&0===s.suggestList.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",Z,[(0,i.withDirectives)((0,i.createElementVNode)("div",G,[(0,i.createVNode)(m,{title:"历史搜索",class:"sub-title",icon:"clock-o"},{"right-icon":(0,i.withCtx)((()=>[(0,i.createVNode)(u,{name:"delete-o",class:"delete-icon",onClick:l.deleteAllHistory},null,8,["onClick"])])),_:1}),(0,i.createElementVNode)("ul",Y,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.historyList,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("li",{class:"history-item",key:t,onMousedown:t=>l.resultFn(e)},(0,i.toDisplayString)(e),41,ee)))),128)),(0,i.withDirectives)((0,i.createElementVNode)("li",te,[(0,i.createVNode)(u,{name:"arrow-down",onClick:l.showAllHistory},null,8,["onClick"])],512),[[i.vShow,s.showAllArrow]]),(0,i.withDirectives)((0,i.createElementVNode)("li",oe,[(0,i.createVNode)(u,{name:"arrow-up",onClick:l.cutHistory},null,8,["onClick"])],512),[[i.vShow,s.showCutArrow]])])],512),[[i.vShow,0!=s.historyList.length]]),(0,i.createElementVNode)("div",re,[(0,i.createElementVNode)("p",ne,[(0,i.createVNode)(u,{name:"fire",color:"#8648D3",size:"0.48rem"}),(0,i.createTextVNode)(" 热门搜索")]),(0,i.createVNode)(y,{class:"hot-name-wrap"},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.hotList,((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(v,{class:"hot-item",key:t,value:e.first,onMousedown:t=>l.resultFn(e.first)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.first)+" ",1),(0,i.withDirectives)((0,i.createVNode)(u,{name:"fire",color:"red"},null,512),[[i.vShow,t<3]])])),_:2},1032,["value","onMousedown"])))),128))])),_:1})])])):s.prepareSearch&&0!=s.suggestList.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",ie,[(0,i.createVNode)(k,null,{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.suggestList,((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(m,{icon:"search",key:t,onMousedown:t=>l.resultFn(e.keyword)},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(w,{content:e.keyword,keyword:s.searchValue},null,8,["content","keyword"])])),_:2},1032,["onMousedown"])))),128))])),_:1})])):((0,i.openBlock)(),(0,i.createElementBlock)("div",ae,[se,(0,i.createElementVNode)("div",{class:"van-list-wrap",style:(0,i.normalizeStyle)({height:l.currentId&&!l.fullScreen?"calc(100vh - 240px)":"calc(100vh - 180px)"})},[(0,i.createVNode)(k,{loading:s.loading,"onUpdate:loading":t[4]||(t[4]=e=>s.loading=e),finished:s.finished,"immediate-check":!1,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载",onLoad:l.onLoad},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.searchResList,((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(b,{key:e.id,name:e.name,author:e.artists[0].name,id:e.id,index:t},null,8,["name","author","id","index"])))),128))])),_:1},8,["loading","finished","onLoad"])],4)]))])}var ce=o(8737);const ue=function(e,t){t=t||500;let o=null;return function(){let r=this,n=arguments;o&&clearTimeout(o),o=setTimeout((()=>{e.apply(r,n)}),t)}};var de={data(){return{searchValue:"",searchDefault:"",prepareSearch:!0,historyList:this.getLocalHistoryList(),showAllArrow:!1,showCutArrow:!1,hotList:[],suggestList:[],searchResList:[],loading:!1,finished:!1,page:1}},name:"search-view",computed:{fullScreen(){return this.$store.state.fullScreen},currentId(){return this.$store.state.currentId}},watch:{suggestList(){!this.prepareSearch||0!==this.suggestList.length&&""!==this.searchValue||this.$nextTick((()=>this.cutOverflowHistoryItem()))}},created(){this.getSearchDefault(),this.getHotListRes(),this.getLocalHistoryList()},mounted(){this.historyList.length&&this.cutOverflowHistoryItem()},methods:{async getSearchDefault(){const e=await(0,ce.B0)({realIP:"116.25.146.177"});this.searchDefault=e.data.data.showKeyword},async getHotListRes(){const e=await(0,ce.l)({realIP:"116.25.146.177"});this.hotList=e.data.result.hots},async getListFn(){return await(0,ce.G_)({keywords:this.searchValue,limit:15,offset:15*(this.page-1),realIP:"116.25.146.177"})},getSuggestFn:ue((async function(){if(""===this.searchValue.trim())return void(this.suggestList=[]);const e=await(0,ce.GB)({keywords:this.searchValue,type:"mobile",realIP:"116.25.146.177"});void 0!==e.data.result.allMatch?this.suggestList=e.data.result.allMatch:this.suggestList=[]}),200),async searchBtnFn(){if(""===this.searchValue)this.searchValue=this.searchDefault,this.getSuggestFn();else if(""===this.searchValue.trim())return void vant.Toast.fail("请输入你要搜索的歌曲");this.addHistoryItem(this.searchValue),this.prepareSearch=!1,this.page=1,this.finished=!1;const e=await this.getListFn();0!==e.data.result.songCount?(this.searchResList=e.data.result.songs.filter((e=>8===e.fee||0===e.fee&&!e.noCopyrightRcmd)),this.loading=!1):vant.Dialog.alert({message:"找不到你要的歌曲"})},async resultFn(e){this.searchValue=e,this.addHistoryItem(e),this.getSuggestFn(),this.prepareSearch=!1,this.page=1,this.finished=!1;const t=await this.getListFn();this.searchResList=t.data.result.songs.filter((e=>8===e.fee||0===e.fee&&!e.noCopyrightRcmd)),this.loading=!1},async onLoad(){this.page++;const e=await this.getListFn();void 0===e.data.result.songs?this.finished=!0:this.searchResList.push(...e.data.result.songs),this.loading=!1},getLocalHistoryList(){return localStorage.getItem("historyList")||localStorage.setItem("historyList","[]"),this.historyList=JSON.parse(localStorage.getItem("historyList")),this.historyList},addHistoryItem(e){this.historyList.includes(e)&&(this.historyList=this.historyList.filter((t=>t!=e))),15===this.historyList.length&&this.historyList.pop(),this.historyList.unshift(e),localStorage.setItem("historyList",JSON.stringify(this.historyList))},showAllHistory(){this.showAllArrow=!1,this.showCutArrow=!0;const e=document.querySelectorAll(".history-item");e.forEach((e=>{e.style.display="inline-block"}))},cutHistory(){this.showCutArrow=!1,this.cutOverflowHistoryItem()},cutOverflowHistoryItem(){this.showCutArrow=!1;const e=document.querySelectorAll(".history-item");if(!e.length)return;let t=0,o=e[0].offsetLeft;for(let r=0;r<e.length;r++)if(e[r].offsetLeft===o&&t++,3===t){this.showAllArrow=!0;for(let t=r-1;t<e.length;t++)e[t].style.display="none";break}},deleteAllHistory(){vant.Dialog.confirm({title:"",message:"确认删除全部历史记录？",confirmButtonColor:"#8648D3"}).then((()=>{this.historyList=[],localStorage.setItem("historyList","[]"),this.showAllArrow=this.showCutArrow=!1})).catch((()=>{}))}},components:{SongItem:r.Z,SuggestHighLight:d}};const he=(0,c.Z)(de,[["render",le]]);var ge=he},3444:function(e,t,o){o.d(t,{F:function(){return i}});var r=o(311),n=o(2220);function i(e){const t=(0,r.getCurrentInstance)();t&&(0,n.l7)(t.proxy,e)}},4821:function(e,t,o){o.d(t,{a:function(){return y}});var r=o(1404),n=o(311),i=o(610),a=o(5323),s=o(7936),l=o(253),c=o(3444);const u=Symbol(),d=()=>(0,n.inject)(u,null);var h=o(2229);const[g,f,p]=(0,i["do"])("list"),m={error:Boolean,offset:(0,a.SI)(300),loading:Boolean,finished:Boolean,errorText:String,direction:(0,a.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:a.J5};var v=(0,n.defineComponent)({name:g,props:m,emits:["load","update:error","update:loading"],setup(e,t){let{emit:o,slots:r}=t;const i=(0,n.ref)(!1),a=(0,n.ref)(),u=(0,n.ref)(),g=d(),m=(0,l.eo)(a),v=()=>{(0,n.nextTick)((()=>{if(i.value||e.finished||e.error||!1===(null==g?void 0:g.value))return;const{offset:t,direction:r}=e,n=(0,l.EL)(m);if(!n.height||(0,s.xj)(a))return;let c=!1;const d=(0,l.EL)(u);c="up"===r?n.top-d.top<=t:d.bottom-n.bottom<=t,c&&(i.value=!0,o("update:loading",!0),o("load"))}))},y=()=>{if(e.finished){const t=r.finished?r.finished():e.finishedText;if(t)return(0,n.createVNode)("div",{class:f("finished-text")},[t])}},w=()=>{o("update:error",!1),v()},k=()=>{if(e.error){const t=r.error?r.error():e.errorText;if(t)return(0,n.createVNode)("div",{role:"button",class:f("error-text"),tabindex:0,onClick:w},[t])}},b=()=>{if(i.value&&!e.finished)return(0,n.createVNode)("div",{class:f("loading")},[r.loading?r.loading():(0,n.createVNode)(h.g,{class:f("loading-icon")},{default:()=>[e.loadingText||p("loading")]})])};return(0,n.watch)((()=>[e.loading,e.finished,e.error]),v),g&&(0,n.watch)(g,(e=>{e&&v()})),(0,n.onUpdated)((()=>{i.value=e.loading})),(0,n.onMounted)((()=>{e.immediateCheck&&v()})),(0,c.F)({check:v}),(0,l.OR)("scroll",v,{target:m,passive:!0}),()=>{var t;const o=null==(t=r.default)?void 0:t.call(r),s=(0,n.createVNode)("div",{ref:u,class:f("placeholder")},null);return(0,n.createVNode)("div",{ref:a,role:"feed",class:f(),"aria-busy":i.value},["down"===e.direction?o:s,b(),y(),k(),"up"===e.direction?o:s])}}});const y=(0,r.n)(v)},563:function(e,t,o){o(1958),o(2939)},7936:function(e,t,o){o.d(t,{PF:function(){return h},kn:function(){return l},oD:function(){return s},pe:function(){return u},xj:function(){return g}});var r=o(253),n=o(311),i=o(6491);function a(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function s(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function l(e){a(window,e),a(document.body,e)}const c=(0,i.gn)();function u(){c&&l(s())}const d=e=>e.stopPropagation();function h(e,t){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&d(e)}function g(e){const t=(0,n.unref)(e);if(!t)return!1;const o=window.getComputedStyle(t),r="none"===o.display,i=null===t.offsetParent&&"fixed"!==o.position;return r||i}const{width:f,height:p}=(0,r.iP)()}}]);